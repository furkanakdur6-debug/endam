<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>endam</title>

<style>
  :root{
    --pink1:#ff5f9e;
    --pink2:#ff8fb1;
    --rose:#ff4d6d;
    --soft:#fff0f5;
    --line:#ffd1df;
    --shadow: 0 10px 30px rgba(0,0,0,.08);
  }

  body { margin:0; font-family: Arial, sans-serif; background:var(--soft); overflow-x:hidden; }

  /* =========================
     GÄ°RÄ°Å / LOGIN
     ========================= */
  #giris{
    position:fixed; inset:0;
    background:linear-gradient(135deg,var(--pink1),var(--pink2));
    display:flex; justify-content:center; align-items:center;
    color:#fff; text-align:center; z-index:50;
    padding:18px;
    overflow:hidden;
  }
  #giris::before, #giris::after{
    content:"";
    position:absolute;
    width:420px; height:420px;
    border-radius:50%;
    background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.35), rgba(255,255,255,0));
    opacity:.8;
    animation: blob 8s ease-in-out infinite;
  }
  #giris::before{ left:-120px; top:-120px; }
  #giris::after{ right:-140px; bottom:-140px; animation-delay:-3.5s; }
  @keyframes blob{
    0%,100%{ transform: translate(0,0) scale(1); }
    50%{ transform: translate(30px, -20px) scale(1.08); }
  }

  #giris .card{
    position:relative;
    width:min(520px, 92vw);
    background:rgba(255,255,255,.14);
    border:1px solid rgba(255,255,255,.25);
    backdrop-filter: blur(10px);
    border-radius:22px;
    padding:18px 18px 16px;
    box-shadow:0 20px 60px rgba(0,0,0,.22);
  }
  #giris img{
    width:220px; border-radius:20px; margin:8px auto 10px;
    box-shadow:0 10px 30px rgba(0,0,0,.25);
    display:block;
  }
  .login-row{ display:grid; gap:10px; margin-top:12px; }
  .inp{
    width:100%;
    box-sizing:border-box;
    padding:14px 14px;
    border-radius:14px;
    border:1px solid rgba(255,255,255,.35);
    background:rgba(255,255,255,.18);
    color:#fff;
    outline:none;
    font-size:16px;
  }
  .inp::placeholder{ color:rgba(255,255,255,.78); }

  .btn{
    padding:14px 28px; border:none; border-radius:999px;
    font-size:18px; cursor:pointer;
    transition:transform .15s, box-shadow .15s;
  }
  .btn.primary{ background:#fff; color:var(--rose); }
  .btn.primary:hover{ transform:scale(1.03); box-shadow:0 10px 24px rgba(0,0,0,.12); }
  .btn.secondary{ background:#444; color:#fff; }
  .btn.secondary:hover{ transform:scale(1.03); }

  .hint{
    margin-top:12px;
    background:rgba(255,255,255,.14);
    border:1px dashed rgba(255,255,255,.35);
    padding:12px;
    border-radius:14px;
    text-align:left;
    font-size:14px;
    line-height:1.45;
  }
  .hint b{ color:#fff; }
  .login-feedback{
    margin-top:10px;
    min-height:22px;
    font-weight:800;
  }

  /* =========================
     HOÅ GELDÄ°N EKRANI
     ========================= */
  #basardin{
    position:fixed; inset:0;
    background:linear-gradient(135deg,var(--pink1),var(--pink2));
    display:none; justify-content:center; align-items:center;
    color:#fff; text-align:center; z-index:60;
    padding:18px;
    overflow:hidden;
  }
  #basardin::before, #basardin::after{
    content:"";
    position:absolute;
    width:420px; height:420px;
    border-radius:50%;
    background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.35), rgba(255,255,255,0));
    opacity:.8;
    animation: blob 8s ease-in-out infinite;
  }
  #basardin::before{ left:-120px; top:-120px; }
  #basardin::after{ right:-140px; bottom:-140px; animation-delay:-3.5s; }

  #basardin .card{
    position:relative;
    width:min(520px, 92vw);
    background:rgba(255,255,255,.14);
    border:1px solid rgba(255,255,255,.25);
    backdrop-filter: blur(10px);
    border-radius:22px;
    padding:18px;
    box-shadow:0 20px 60px rgba(0,0,0,.22);
  }
  #basardin h1{ margin:6px 0 12px; }

  /* =========================
     SÄ°TE GENEL
     ========================= */
  #site{ display:none; padding:20px; position:relative; overflow:hidden; }
  #site::before, #site::after{
    content:"";
    position:fixed;
    z-index:-2;
    inset:-40vh -40vw;
    background:
      radial-gradient(circle at 20% 20%, rgba(255,95,158,.22), rgba(255,255,255,0) 45%),
      radial-gradient(circle at 80% 30%, rgba(255,143,177,.24), rgba(255,255,255,0) 45%),
      radial-gradient(circle at 30% 80%, rgba(255,77,109,.16), rgba(255,255,255,0) 50%),
      radial-gradient(circle at 80% 80%, rgba(255,210,225,.35), rgba(255,255,255,0) 50%);
    animation: bgmove 10s ease-in-out infinite;
  }
  #site::after{
    filter: blur(10px);
    opacity:.75;
    animation-duration: 14s;
  }
  @keyframes bgmove{
    0%,100%{ transform: translate(0,0) scale(1); }
    50%{ transform: translate(2vw, -2vh) scale(1.03); }
  }

  /* uÃ§uÅŸan kalpler */
  .hearts{
    position:fixed; inset:0; z-index:-1;
    pointer-events:none; overflow:hidden;
  }
  .heart{
    position:absolute;
    font-size:14px;
    opacity:.18;
    animation: floatUp linear infinite;
  }
  @keyframes floatUp{
    from{ transform: translateY(110vh) translateX(0) rotate(0deg); }
    to{ transform: translateY(-20vh) translateX(40px) rotate(20deg); }
  }

  h1,h2,h3{ text-align:center; margin:14px 0; }
  h3{ cursor:pointer; }

  .bolum{
    max-width:900px; margin:20px auto;
    background:rgba(255,255,255,.82);
    border:1px solid rgba(255,255,255,.55);
    backdrop-filter: blur(8px);
    padding:22px; border-radius:18px; line-height:1.6;
    box-shadow: var(--shadow);
  }
  .hidden{ display:none !important; }

  /* ÃœST BAR (Geri) */
  .topbar{
    max-width:900px;
    margin:0 auto 12px;
    display:flex;
    justify-content:flex-start;
  }
  .backbtn{
    display:inline-flex;
    align-items:center;
    gap:8px;
    padding:10px 14px;
    border-radius:999px;
    border:1px solid var(--line);
    background:rgba(255,255,255,.92);
    cursor:pointer;
    font-weight:700;
    box-shadow:0 8px 18px rgba(0,0,0,.06);
    transition:transform .12s;
  }
  .backbtn:hover{ background:#fff7fb; transform: translateY(-1px); }

  /* HERO + Dashboard */
  .hero{
    max-width:900px;
    margin:0 auto 14px;
    padding:18px;
    border-radius:22px;
    background:linear-gradient(135deg, rgba(255,95,158,.18), rgba(255,143,177,.16));
    border:1px solid rgba(255,255,255,.6);
    backdrop-filter: blur(10px);
    box-shadow: var(--shadow);
    position:relative;
    overflow:hidden;
  }
  .hero::after{
    content:"";
    position:absolute; inset:-40px;
    background:
      radial-gradient(circle at 10% 20%, rgba(255,255,255,.35), rgba(255,255,255,0) 40%),
      radial-gradient(circle at 90% 10%, rgba(255,255,255,.22), rgba(255,255,255,0) 45%);
    opacity:.8;
    pointer-events:none;
  }
  .hero h2{ margin:4px 0 6px; }
  .hero p{ text-align:center; margin:0; opacity:.8; font-weight:700; }

  .dash{ display:grid; gap:12px; margin-top:12px; position:relative; z-index:1; }
  .dash-top{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:12px;
  }
  .dash-card{
    background:rgba(255,255,255,.85);
    border:1px solid rgba(255,255,255,.6);
    border-radius:16px;
    padding:14px;
    box-shadow:0 8px 18px rgba(0,0,0,.06);
  }
  .dash-big{
    font-size:30px;
    font-weight:900;
    text-align:center;
    letter-spacing:.5px;
    color:#222;
  }
  .dash-small{
    text-align:center;
    margin-top:6px;
    opacity:.75;
    font-size:14px;
    font-weight:800;
  }
  .dash-quote{
    text-align:center;
    font-size:16px;
    font-weight:800;
    color:var(--rose);
  }
  .dash-quote-sub{
    text-align:center;
    opacity:.72;
    margin-top:6px;
    font-size:13px;
    font-weight:700;
  }
  @media (max-width:560px){
    .dash-top{ grid-template-columns: 1fr; }
  }

  /* DÃ¼nyanÄ±n En GÃ¼zeli rozet link */
  .best-badge{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap:8px;
    margin:12px auto 0;
    padding:10px 14px;
    border-radius:999px;
    border:1px solid var(--line);
    background:rgba(255,255,255,.92);
    text-decoration:none;
    font-weight:900;
    color:var(--rose);
    box-shadow:0 10px 26px rgba(0,0,0,.07);
    position:relative;
    z-index:2;
    transition:transform .12s;
  }
  .best-badge:hover{ transform: translateY(-1px) scale(1.01); }
  .best-badge .star{
    width:28px; height:28px;
    border-radius:999px;
    background:linear-gradient(135deg, rgba(255,95,158,.25), rgba(255,143,177,.22));
    display:flex;
    align-items:center;
    justify-content:center;
    border:1px solid rgba(255,95,158,.18);
  }

  /* âœ… Ana menÃ¼ "evim ğŸ’—" simgesi */
  .home-badge{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap:8px;
    margin:10px auto 0;
    padding:10px 14px;
    border-radius:999px;
    border:1px solid var(--line);
    background:rgba(255,255,255,.92);
    cursor:pointer;
    user-select:none;
    font-weight:900;
    color:var(--rose);
    box-shadow:0 10px 26px rgba(0,0,0,.07);
    position:relative;
    z-index:2;
    transition:transform .12s;
  }
  .home-badge:hover{ transform: translateY(-1px) scale(1.01); }
  .home-badge .ico{
    width:28px; height:28px;
    border-radius:999px;
    background:linear-gradient(135deg, rgba(255,95,158,.22), rgba(255,143,177,.18));
    display:flex; align-items:center; justify-content:center;
    border:1px solid rgba(255,95,158,.18);
  }

  /* MenÃ¼ kartlarÄ± */
  .menu-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit, minmax(220px, 1fr));
    gap:14px;
    margin-top:14px;
    position:relative;
    z-index:1;
  }
  .menu-item{
    position:relative;
    border-radius:18px;
    padding:18px;
    cursor:pointer;
    user-select:none;
    overflow:hidden;
    background:rgba(255,255,255,.86);
    border:1px solid rgba(255,255,255,.65);
    backdrop-filter: blur(8px);
    box-shadow:0 10px 28px rgba(0,0,0,.07);
    transition:transform .14s, box-shadow .14s;
  }
  .menu-item::before{
    content:"";
    position:absolute;
    inset:-60px;
    background:
      radial-gradient(circle at 20% 20%, rgba(255,95,158,.22), rgba(255,255,255,0) 50%),
      radial-gradient(circle at 90% 10%, rgba(255,143,177,.18), rgba(255,255,255,0) 55%);
    opacity:.7;
    transform: rotate(8deg);
    pointer-events:none;
  }
  .menu-item:hover{
    transform: translateY(-3px);
    box-shadow:0 16px 40px rgba(0,0,0,.10);
  }
  .menu-emoji{ font-size:36px; margin-bottom:8px; position:relative; z-index:1; }
  .menu-title{ font-size:18px; font-weight:900; margin-bottom:6px; position:relative; z-index:1; }
  .menu-sub{ font-size:14px; opacity:.75; font-weight:700; position:relative; z-index:1; }

  /* FOTO */
  .gallery{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
    gap:10px; margin-top:14px;
  }
  .gallery img{
    width:100%; border-radius:12px; cursor:pointer;
    transition:transform .15s, box-shadow .15s;
    box-shadow:0 10px 22px rgba(0,0,0,.08);
  }
  .gallery img:hover{ transform:scale(1.03); box-shadow:0 16px 34px rgba(0,0,0,.12); }

  /* LIGHTBOX */
  #lightbox{
    position:fixed; inset:0;
    background:rgba(0,0,0,.86);
    display:none; justify-content:center; align-items:center;
    z-index:80; padding:18px;
    touch-action: pan-y;
  }
  #lightbox .wrap{
    position:relative;
    width:fit-content;
    max-width:92vw;
    max-height:92vh;
  }
  #lightbox img{
    max-width:92vw; max-height:92vh; border-radius:14px;
    display:block;
    box-shadow:0 20px 70px rgba(0,0,0,.35);
  }
  .lb-btn{
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    width:48px; height:48px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.25);
    background:rgba(0,0,0,.35);
    color:#fff;
    font-size:22px;
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:center;
    user-select:none;
  }
  .lb-btn:hover{ background:rgba(0,0,0,.55); }
  .lb-prev{ left:-14px; }
  .lb-next{ right:-14px; }
  .lb-close{
    position:absolute;
    top:-12px; right:-12px;
    width:42px; height:42px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.25);
    background:rgba(0,0,0,.35);
    color:#fff;
    font-size:18px;
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .lb-close:hover{ background:rgba(0,0,0,.55); }

  /* ÅARKILAR */
  .sarki{
    background:rgba(255,228,236,.9);
    margin:10px 0;
    padding:14px;
    border-radius:14px;
    text-align:center;
    cursor:pointer;
    user-select:none;
    border:1px solid rgba(255,255,255,.65);
    box-shadow:0 8px 18px rgba(0,0,0,.06);
    transition:transform .12s;
  }
  .sarki:hover{ transform: translateY(-1px); background:#ffd1df; }
  .sarki.active{ background:#ffb3c7; }
  audio{ width:100%; margin-top:12px; }

  /* QUIZ */
  .quiz-wrap{ max-width:720px; margin:0 auto; }
  .quiz-etiket{ text-align:center; font-size:14px; opacity:.75; margin-top:6px; }
  .quiz-soru{ text-align:center; font-size:20px; font-weight:900; margin:12px 0 10px; }
  .quiz-secenekler{ display:grid; gap:10px; margin-top:10px; }
  .quiz-btn{
    padding:14px 14px;
    border-radius:14px;
    border:1px solid var(--line);
    background:#fff;
    cursor:pointer;
    font-size:16px;
    box-shadow:0 8px 18px rgba(0,0,0,.05);
  }
  .quiz-btn:hover{ background:#fff7fb; }
  .quiz-btn:disabled{ opacity:.75; cursor:default; }
  .quiz-feedback{ text-align:center; font-weight:900; margin-top:12px; min-height:22px; }
  .quiz-kontrol{ display:flex; gap:10px; justify-content:center; margin-top:14px; flex-wrap:wrap; }
  .quiz-sonuc{ text-align:center; margin-top:14px; font-weight:900; }

  /* SENÄ°N Ä°Ã‡Ä°N */
  .soz-card{
    max-width:720px;
    margin:10px auto 0;
    background:linear-gradient(180deg,#fff, #fff7fb);
    border:1px solid var(--line);
    border-radius:22px;
    padding:22px;
    box-shadow:0 14px 40px rgba(0,0,0,.08);
    cursor:pointer;
    user-select:none;
    position:relative;
    overflow:hidden;
  }
  .soz-card::before{
    content:"";
    position:absolute;
    inset:-80px;
    background:
      radial-gradient(circle at 20% 20%, rgba(255,95,158,.18), rgba(255,255,255,0) 55%),
      radial-gradient(circle at 85% 15%, rgba(255,143,177,.18), rgba(255,255,255,0) 55%);
    opacity:.9;
    transform: rotate(8deg);
  }
  .soz-big{
    position:relative;
    text-align:center;
    font-size:20px;
    font-weight:900;
    color:var(--rose);
    line-height:1.55;
  }
  .soz-sub{
    position:relative;
    text-align:center;
    margin-top:10px;
    font-size:13px;
    opacity:.75;
    font-weight:800;
  }
  .soz-controls{
    display:flex;
    justify-content:center;
    gap:10px;
    margin-top:14px;
    flex-wrap:wrap;
  }

  /* ğŸ KÃ¼Ã§Ã¼k sÃ¼rpriz */
  .surpriz-wrap{ display:grid; gap:14px; justify-items:center; }
  .surpriz-heart{
    width:140px; height:140px; border-radius:999px;
    background:rgba(255,255,255,.9);
    border:1px solid var(--line);
    box-shadow:0 16px 40px rgba(0,0,0,.10);
    display:flex; align-items:center; justify-content:center;
    cursor:pointer; user-select:none;
    position:relative; overflow:hidden;
    transition:transform .12s;
  }
  .surpriz-heart:hover{ transform: scale(1.03); }
  .surpriz-heart::before{
    content:""; position:absolute; inset:-60px;
    background:
      radial-gradient(circle at 25% 25%, rgba(255,95,158,.22), rgba(255,255,255,0) 55%),
      radial-gradient(circle at 80% 20%, rgba(255,143,177,.18), rgba(255,255,255,0) 55%);
    opacity:.9;
  }
  .surpriz-heart span{
    position:relative;
    font-size:54px;
    animation: pulse 1.2s ease-in-out infinite;
  }
  @keyframes pulse{ 0%,100%{ transform:scale(1);} 50%{ transform:scale(1.08);} }
  .surpriz-text{ text-align:center; font-weight:900; color:#333; }
  .hazir{
    display:none;
    text-align:center;
    font-weight:900;
    color:var(--rose);
    background:rgba(255,255,255,.85);
    border:1px solid var(--line);
    border-radius:999px;
    padding:10px 14px;
    box-shadow:0 10px 26px rgba(0,0,0,.08);
  }
  .hazir.show{ display:inline-flex; align-items:center; gap:8px; }
  .hazir span{ font-size:18px; }
  .video-wrap{ width:min(780px, 100%); display:none; }
  .video-wrap video{
    width:100%;
    border-radius:18px;
    box-shadow:0 18px 50px rgba(0,0,0,.18);
    background:#000;
  }

  /* ğŸ¡ Ã‡ARK */
  .wheel-wrap{ display:grid; justify-items:center; gap:14px; }
  .wheel-stage{
    position:relative;
    width:min(340px, 86vw);
    aspect-ratio:1/1;
    display:grid;
    place-items:center;
  }
  .wheel{
    width:100%;
    height:100%;
    border-radius:50%;
    border:10px solid rgba(255,255,255,.9);
    box-shadow:0 18px 60px rgba(0,0,0,.14);
    overflow:hidden;
    transform: rotate(0deg);
    transition: transform 4.2s cubic-bezier(.1,.8,.1,1);
    background:
      conic-gradient(
        #ffd1df 0 12.5%,
        #fff7fb 12.5% 25%,
        #ffb3c7 25% 37.5%,
        #ffe4ec 37.5% 50%,
        #ffd1df 50% 62.5%,
        #fff7fb 62.5% 75%,
        #ffb3c7 75% 87.5%,
        #ffe4ec 87.5% 100%
      );
    position:relative;
  }
  .wheel-labels{ position:absolute; inset:0; pointer-events:none; }
  .wheel-label{
    position:absolute; left:50%; top:50%;
    transform-origin: 0 0;
    width:160px;
    text-align:center;
    font-weight:900;
    color:#333;
    font-size:12px;
    text-shadow:0 1px 0 rgba(255,255,255,.6);
    white-space:nowrap;
  }
  .pointer{
    position:absolute; top:-10px; left:50%;
    transform:translateX(-50%);
    width:0; height:0;
    border-left:14px solid transparent;
    border-right:14px solid transparent;
    border-bottom:26px solid var(--rose);
    filter: drop-shadow(0 8px 10px rgba(0,0,0,.18));
  }
  .wheel-center{
    position:absolute;
    width:92px; height:92px;
    border-radius:50%;
    background:rgba(255,255,255,.92);
    border:1px solid var(--line);
    box-shadow:0 12px 30px rgba(0,0,0,.10);
    display:grid;
    place-items:center;
    font-weight:900;
    color:var(--rose);
  }
  .wheel-result{
    text-align:center;
    font-weight:900;
    color:#333;
    background:rgba(255,255,255,.85);
    border:1px solid var(--line);
    border-radius:16px;
    padding:12px 14px;
    width:min(680px, 100%);
    box-shadow:0 10px 26px rgba(0,0,0,.06);
    min-height:44px;
    display:grid;
    place-items:center;
  }
  .wheel-sub{ text-align:center; opacity:.7; font-weight:800; margin-top:-6px; }

  /* ğŸ  EVÄ°M MODAL (SÃœRPRÄ°Z) */
  #homeModal{
    position:fixed; inset:0;
    background:rgba(0,0,0,.72);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:140;
    padding:16px;
  }
  #homeModal .card{
    width:min(860px, 95vw);
    background:rgba(255,255,255,.94);
    border:1px solid rgba(255,255,255,.7);
    border-radius:20px;
    padding:16px;
    box-shadow:0 30px 90px rgba(0,0,0,.25);
    position:relative;
  }
  #homeModal .close{
    position:absolute;
    top:10px; right:10px;
    width:40px; height:40px;
    border-radius:999px;
    border:1px solid var(--line);
    background:#fff;
    cursor:pointer;
    font-weight:900;
  }
  #homeModal .title{
    text-align:center;
    font-size:22px;
    font-weight:900;
    color:var(--rose);
    margin:10px 0 12px;
  }
  #homeModal .sub{
    text-align:center;
    font-weight:900;
    color:#333;
    opacity:.85;
    margin-top:-6px;
    margin-bottom:10px;
  }
  #homeModal video{
    width:100%;
    border-radius:16px;
    background:#000;
    box-shadow:0 18px 50px rgba(0,0,0,.18);
    display:none; /* sÃ¼rpriz: Ã¶nce yazÄ± */
  }
  .shake{ animation: shake .75s ease-in-out infinite; }
  @keyframes shake{
    0%,100%{ transform: translateX(0); }
    25%{ transform: translateX(-2px); }
    50%{ transform: translateX(2px); }
    75%{ transform: translateX(-1px); }
  }

  /* =========================
     ğŸ’¬ Endam Bot (SaÄŸ Alt)
     ========================= */
  #aiFab{
    position:fixed;
    right:16px;
    bottom:16px;
    width:58px;
    height:58px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.65);
    background:linear-gradient(135deg,var(--pink1),var(--pink2));
    box-shadow:0 18px 45px rgba(0,0,0,.18);
    cursor:pointer;
    display:none; /* login sonrasÄ± aÃ§acaÄŸÄ±z */
    align-items:center;
    justify-content:center;
    z-index:150;
    user-select:none;
  }
  #aiFab span{ font-size:26px; filter: drop-shadow(0 6px 10px rgba(0,0,0,.18)); }

  #aiChat{
    position:fixed;
    right:16px;
    bottom:86px;
    width:min(360px, calc(100vw - 32px));
    height:460px;
    border-radius:18px;
    background:rgba(255,255,255,.92);
    border:1px solid rgba(255,255,255,.75);
    box-shadow:0 26px 80px rgba(0,0,0,.22);
    backdrop-filter: blur(10px);
    display:none;
    overflow:hidden;
    z-index:150;
  }
  #aiChatHeader{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:10px 12px;
    background:linear-gradient(135deg,var(--pink1),var(--pink2));
    color:#fff;
    font-weight:900;
  }
  #aiChatHeader .title{ display:flex; gap:8px; align-items:center; }
  #aiChatHeader .close{
    width:34px; height:34px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.45);
    background:rgba(0,0,0,.18);
    color:#fff;
    cursor:pointer;
    font-weight:900;
  }
  #aiChatBody{
    padding:12px;
    height:calc(460px - 56px - 64px);
    overflow:auto;
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  .aiMsg{
    max-width:82%;
    padding:10px 12px;
    border-radius:14px;
    line-height:1.35;
    font-weight:800;
    font-size:14px;
    box-shadow:0 10px 22px rgba(0,0,0,.06);
    white-space:pre-wrap;
    word-wrap:break-word;
  }
  .aiUser{
    align-self:flex-end;
    background:#fff;
    border:1px solid var(--line);
    color:#222;
  }
  .aiBot{
    align-self:flex-start;
    background:rgba(255,228,236,.85);
    border:1px solid rgba(255,255,255,.75);
    color:var(--rose);
  }
  #aiChatInput{
    display:flex;
    gap:10px;
    padding:10px 12px;
    border-top:1px solid var(--line);
    background:rgba(255,255,255,.92);
  }
  #aiInput{
    flex:1;
    padding:12px 12px;
    border-radius:14px;
    border:1px solid var(--line);
    outline:none;
    font-size:14px;
    font-weight:800;
    color:#222;
    background:#fff;
  }
  #aiSend{
    padding:12px 14px;
    border:none;
    border-radius:14px;
    cursor:pointer;
    font-weight:900;
    color:#fff;
    background:var(--rose);
    box-shadow:0 10px 22px rgba(0,0,0,.10);
  }
  #aiSend:disabled{ opacity:.7; cursor:default; }
</style>
</head>

<body>

<!-- GÄ°RÄ°Å -->
<div id="giris">
  <div class="card">
    <img src="img/giris/giris.jpg" alt="GiriÅŸ" />
    <h1>â¤ï¸ Senin iÃ§in â¤ï¸</h1>

    <div class="login-row">
      <input id="kullanici" class="inp" type="text" placeholder="KullanÄ±cÄ± adÄ±" autocomplete="off" />
      <input id="sifre" class="inp" type="password" placeholder="Åifre" inputmode="numeric" autocomplete="off" />
      <button class="btn primary" onclick="girisKontrol()">GiriÅŸ Yap</button>
    </div>

    <div class="login-feedback" id="loginFeedback"></div>

    <div class="hint">
      <div><b>Ä°pucu</b></div>
      <div>KullanÄ±cÄ± adÄ± iÃ§in: <b>Sana sÃ¶zel kullandÄ±ÄŸÄ±m isim.</b></div>
      <div>Åifre iÃ§in: <b>doÄŸum tarihim gÃ¼n ay yÄ±l ÅŸeklinde.</b></div>
    </div>
  </div>
</div>

<!-- HOÅ GELDÄ°N -->
<div id="basardin">
  <div class="card">
    <h1 id="basardinYazi">HoÅŸ geldin Endam â¤ï¸</h1>
    <button class="btn primary" onclick="siteyeGir()">Sayfaya Gir</button>
  </div>
</div>

<!-- LIGHTBOX -->
<div id="lightbox" onclick="lightboxArkaplanTik(event)">
  <div class="wrap" id="lbWrap">
    <button class="lb-close" onclick="kapatLightbox()" aria-label="Kapat">âœ•</button>
    <button class="lb-btn lb-prev" onclick="oncekiFoto()" aria-label="Ã–nceki">â€¹</button>
    <img id="lightboxImg" alt="FotoÄŸraf" />
    <button class="lb-btn lb-next" onclick="sonrakiFoto()" aria-label="Sonraki">â€º</button>
  </div>
</div>

<!-- UÃ§uÅŸan kalpler -->
<div class="hearts" id="hearts"></div>

<!-- ğŸ  EVÄ°M MODAL -->
<div id="homeModal" onclick="homeModalArkaTik(event)">
  <div class="card">
    <button class="close" onclick="homeVideoKapat()">âœ•</button>
    <div class="title">Ä°ÅŸ benim evim ğŸ’—</div>
    <div class="sub" id="homeSub">HazÄ±r mÄ±sÄ±n? ğŸ ğŸ’—</div>

    <video id="homeVideo" controls playsinline>
      <source src="video/evim.mp4" type="video/mp4">
    </video>
  </div>
</div>

<!-- SÄ°TE -->
<div id="site">

  <!-- MENÃœ -->
  <div id="menu" class="bolum">
    <div class="hero">
      <h2>ğŸ’— Bizim kÃ¼Ã§Ã¼k dÃ¼nyamÄ±z</h2>
      <p>MenÃ¼den dilediÄŸine girâ€¦ her ÅŸey burada â¤ï¸</p>

      <div class="dash">
        <div class="dash-top">
          <div class="dash-card">
            <div class="dash-big" id="saatTxt">--:--:--</div>
            <div class="dash-small" id="tarihTxt">--</div>
          </div>
          <div class="dash-card">
            <div class="dash-big" id="sayacTxt">-- gÃ¼n</div>
            <div class="dash-small">Birlikte geÃ§en zaman â¤ï¸</div>
          </div>
        </div>
        <div class="dash-card">
          <div class="dash-quote" id="sozTxt">â€œ...â€</div>
          <div class="dash-quote-sub">BugÃ¼n de seni seÃ§iyorum</div>
        </div>
      </div>

      <div style="display:flex; justify-content:center; gap:10px; flex-wrap:wrap;">
        <a class="best-badge"
           href="https://www.instagram.com/gulhorozzz?igsh=cGwydHJtNm1yeXRu"
           target="_blank" rel="noopener">
          <span class="star">âœ¨</span>
          DÃ¼nyanÄ±n En GÃ¼zeli
        </a>

        <div class="home-badge" onclick="homeSurprizBaslat()">
          <span class="ico">ğŸ </span>
          evim ğŸ’—
        </div>
      </div>
    </div>

    <div class="menu-grid">
      <div class="menu-item" onclick="sayfaAc('hikayeSayfa')">
        <div class="menu-emoji">ğŸ“–</div>
        <div class="menu-title">HikÃ¢yemiz</div>
        <div class="menu-sub">BaÅŸladÄ±ÄŸÄ± gÃ¼nden bugÃ¼ne</div>
      </div>

      <div class="menu-item" onclick="sayfaAc('fotoSayfa')">
        <div class="menu-emoji">ğŸ“¸</div>
        <div class="menu-title">FotoÄŸraflarÄ±mÄ±z</div>
        <div class="menu-sub">AlbÃ¼m albÃ¼m gezelim</div>
      </div>

      <div class="menu-item" onclick="sayfaAc('sarkiSayfa')">
        <div class="menu-emoji">ğŸµ</div>
        <div class="menu-title">ÅarkÄ±larÄ±mÄ±z</div>
        <div class="menu-sub">ÅarkÄ± bitince diÄŸerine geÃ§er</div>
      </div>

      <div class="menu-item" onclick="sayfaAc('quizSayfa')">
        <div class="menu-emoji">ğŸ’˜</div>
        <div class="menu-title">AÅŸk Testi</div>
        <div class="menu-sub">5 soruluk mini test</div>
      </div>

      <div class="menu-item" onclick="sayfaAc('sozSayfa')">
        <div class="menu-emoji">ğŸ’Œ</div>
        <div class="menu-title">Senin iÃ§in</div>
        <div class="menu-sub">10 cÃ¼mle, her tÄ±kta yenisi</div>
      </div>

      <div class="menu-item" onclick="sayfaAc('surprizSayfa')">
        <div class="menu-emoji">ğŸ</div>
        <div class="menu-title">KÃ¼Ã§Ã¼k sÃ¼rpriz</div>
        <div class="menu-sub">Kalbe dokunâ€¦</div>
      </div>

      <div class="menu-item" onclick="sayfaAc('carkSayfa')">
        <div class="menu-emoji">ğŸ¡</div>
        <div class="menu-title">Ã‡ark Oyunu</div>
        <div class="menu-sub">Ã‡evir ve gÃ¶revi yap ğŸ˜„</div>
      </div>
    </div>
  </div>

  <!-- HÄ°KAYE -->
  <div id="hikayeSayfa" class="hidden">
    <div class="topbar">
      <button class="backbtn" onclick="menuyeDon()">â¬… Geri</button>
    </div>
    <div class="bolum">
      <h2>ğŸ“– Bizim Hayat HikÃ¢yemiz</h2>
      <p>
        12 Mart 2021â€¦<br><br>

        Bir Instagram mesajÄ±yla baÅŸladÄ± her ÅŸey. O gÃ¼n belki sÄ±radan bir gÃ¼ndÃ¼ ama bizim iÃ§in
        koca bir hayatÄ±n ilk adÄ±mÄ±ydÄ±.<br><br>

        Ä°ki gÃ¼n sonra ilk kez buluÅŸtuk. ÃœskÃ¼darâ€™a gittik. Yemek yiyecek bir yer bulamadÄ±k ama
        sahilde paylaÅŸÄ±lan bir muz vardÄ±. O gÃ¼n mutluluÄŸun bazen Ã§ok basit ÅŸeylerde saklÄ± olduÄŸunu Ã¶ÄŸrendik.<br><br>

        Sonra her gÃ¼n okulun yanÄ±nda buluÅŸtuk. AynÄ± yollarÄ± yÃ¼rÃ¼dÃ¼k, aynÄ± hayalleri konuÅŸtuk.
        Zaman geÃ§ti ama hisler hiÃ§ deÄŸiÅŸmedi.<br><br>

        Aylar sonra mesafeler girdi araya. O Manisaâ€™daydÄ±, ben Yozgatâ€™ta. Uzak mesafe kolay deÄŸildi ama
        biz hiÃ§ vazgeÃ§medik. 5 ay sonra Ä°stanbulâ€™a dÃ¶ndÃ¼m, o Manisaâ€™da kalmaya devam etti.
        Bir yÄ±l sonra o da Ä°stanbulâ€™a geldi ve yeniden aynÄ± ÅŸehirde buluÅŸtuk.<br><br>

        Sonra askerlik baÅŸladÄ±. 3 ay Ankara, 9 ay Ä°stanbulâ€¦ Ã–zlem vardÄ± ama gÃ¼ven daha bÃ¼yÃ¼ktÃ¼.
        Birlikte sabretmeyi, beklemeyi ve destek olmayÄ± Ã¶ÄŸrendik.<br><br>

        Askerlik bitti, iÅŸsizlik oldu, belirsizlik oldu. ArdÄ±ndan Bursaâ€¦
        12 ay boyunca hafta sonlarÄ±nÄ± saydÄ±k. KÄ±sa kavuÅŸmalar, uzun Ã¶zlemler yaÅŸadÄ±k.<br><br>

        Ve sonunda tekrar aynÄ± ÅŸehirdeyiz. GeÃ§miÅŸte bir sÃ¼rÃ¼ anÄ±, bugÃ¼nde kocaman bir sevgi,
        gelecekte ise birlikte kurulacak bir hayat var.<br><br>

        Ekim ayÄ±nda niÅŸanlanÄ±yoruzâ€¦ Ve bu hikÃ¢ye burada bitmiyor. AslÄ±nda tam burada baÅŸlÄ±yor â¤ï¸
      </p>
    </div>
  </div>

  <!-- FOTO -->
  <div id="fotoSayfa" class="hidden">
    <div class="topbar">
      <button class="backbtn" onclick="menuyeDon()">â¬… Geri</button>
    </div>
    <div class="bolum">
      <h2>ğŸ“¸ FotoÄŸraflarÄ±mÄ±z</h2>

      <div id="albumListe">
        <h3 onclick="albumAc('ilkzamanlar')">â¤ï¸ Ä°lk Zamanlar</h3>
        <h3 onclick="albumAc('gunluk')">â¤ï¸ GÃ¼nlÃ¼k</h3>
        <h3 onclick="albumAc('dugunler')">â¤ï¸ DÃ¼ÄŸÃ¼nler</h3>
        <h3 onclick="albumAc('geziler')">â¤ï¸ Geziler</h3>
        <h3 onclick="albumAc('deniztatil')">â¤ï¸ Deniz Tatili</h3>
        <h3 onclick="albumAc('kamplarimiz')">â¤ï¸ KamplarÄ±mÄ±z</h3>
      </div>

      <div id="albumIci" class="hidden">
        <div class="topbar" style="justify-content:center; margin-top:10px;">
          <button class="backbtn" onclick="albumKapat()">â¬… AlbÃ¼mlere DÃ¶n</button>
        </div>

        <h3 id="albumBaslik" style="margin-top:10px;"></h3>
        <div id="albumGaleri" class="gallery"></div>
      </div>
    </div>
  </div>

  <!-- ÅARKILAR -->
  <div id="sarkiSayfa" class="hidden">
    <div class="topbar">
      <button class="backbtn" onclick="menuyeDon()">â¬… Geri</button>
    </div>

    <div class="bolum">
      <h2>ğŸµ Bizim ÅarkÄ±larÄ±mÄ±z</h2>

      <div class="sarki" onclick="cal(1,this)">â¤ï¸ Bizim ÅarkÄ±mÄ±z</div>
      <div class="sarki" onclick="cal(2,this)">ğŸ¶ Ä°lk GÃ¼nler</div>
      <div class="sarki" onclick="cal(3,this)">ğŸ’Œ Ã–zlem</div>
      <div class="sarki" onclick="cal(4,this)">ğŸŒ™ Gece</div>
      <div class="sarki" onclick="cal(5,this)">ğŸ–ï¸ Tatil</div>
      <div class="sarki" onclick="cal(6,this)">ğŸˆ Mutluluk</div>
      <div class="sarki" onclick="cal(7,this)">ğŸ”¥ AÅŸk</div>
      <div class="sarki" onclick="cal(8,this)">ğŸ’ Hayal</div>
      <div class="sarki" onclick="cal(9,this)">â¤ï¸ Sonsuza</div>

      <audio id="player" controls></audio>
    </div>
  </div>

  <!-- QUIZ -->
  <div id="quizSayfa" class="hidden">
    <div class="topbar">
      <button class="backbtn" onclick="menuyeDon()">â¬… Geri</button>
    </div>

    <div class="bolum">
      <h2>ğŸ’˜ AÅŸk Testi</h2>

      <div class="quiz-wrap">
        <div class="quiz-etiket" id="quizEtiket">5 soruluk mini test ğŸ˜„</div>
        <div class="quiz-soru" id="quizSoru">BaÅŸlamak iÃ§in â€œTesti BaÅŸlatâ€a bas.</div>

        <div class="quiz-secenekler" id="quizSecenekler"></div>
        <div class="quiz-feedback" id="quizFeedback"></div>

        <div class="quiz-kontrol">
          <button class="btn primary" id="quizBaslatBtn" onclick="quizBaslat()">Testi BaÅŸlat</button>
          <button class="btn secondary" id="quizNextBtn" onclick="sonrakiSoru()" disabled>Sonraki</button>
          <button class="btn secondary" id="quizRestartBtn" onclick="quizSifirla()" style="display:none;">Yeniden BaÅŸla</button>
        </div>

        <div class="quiz-sonuc" id="quizSonuc"></div>
      </div>
    </div>
  </div>

  <!-- SENÄ°N Ä°Ã‡Ä°N -->
  <div id="sozSayfa" class="hidden">
    <div class="topbar">
      <button class="backbtn" onclick="menuyeDon()">â¬… Geri</button>
    </div>

    <div class="bolum">
      <h2>ğŸ’Œ Senin iÃ§in</h2>

      <div class="soz-card" onclick="sozDegistir()">
        <div class="soz-big" id="sozKartTxt">â€œ...â€</div>
        <div class="soz-sub">Karta dokun â€” her tÄ±kta deÄŸiÅŸir âœ¨</div>
      </div>

      <div class="soz-controls">
        <button class="btn primary" onclick="sozDegistir()">Bir tane daha ğŸ’—</button>
        <button class="btn secondary" onclick="sozBasaSar()">BaÅŸa dÃ¶n</button>
      </div>
    </div>
  </div>

  <!-- KÃœÃ‡ÃœK SÃœRPRÄ°Z -->
  <div id="surprizSayfa" class="hidden">
    <div class="topbar">
      <button class="backbtn" onclick="menuyeDon(); surprizTemizle();">â¬… Geri</button>
    </div>

    <div class="bolum">
      <h2>ğŸ KÃ¼Ã§Ã¼k sÃ¼rpriz</h2>

      <div class="surpriz-wrap">
        <div class="surpriz-text">Kalbe dokunâ€¦ ğŸ’—</div>

        <div class="hazir" id="hazirMsg">
          HazÄ±r mÄ±sÄ±n? <span>ğŸ’—</span>
        </div>

        <div class="surpriz-heart" onclick="surprizKalpTik()">
          <span>ğŸ’—</span>
        </div>

        <div class="video-wrap" id="surprizVideoWrap">
          <video id="surprizVideo" controls playsinline>
            <source src="video/kucukluk.mp4" type="video/mp4">
          </video>
        </div>
      </div>
    </div>
  </div>

  <!-- Ã‡ARK -->
  <div id="carkSayfa" class="hidden">
    <div class="topbar">
      <button class="backbtn" onclick="menuyeDon(); carkSifirla();">â¬… Geri</button>
    </div>

    <div class="bolum">
      <h2>ğŸ¡ Ã‡ark Oyunu</h2>

      <div class="wheel-wrap">
        <div class="wheel-stage">
          <div class="pointer"></div>

          <div class="wheel" id="wheel">
            <div class="wheel-labels" id="wheelLabels"></div>
          </div>

          <div class="wheel-center">Ã‡ARK</div>
        </div>

        <div class="wheel-sub">â€œÃ‡evirâ€e bas, Ã§Ä±kan gÃ¶revi yap ğŸ˜„</div>

        <div class="wheel-result" id="wheelResult">HenÃ¼z Ã§evirmedin ğŸ’—</div>

        <div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:center;">
          <button class="btn primary" id="spinBtn" onclick="carkCevir()">Ã‡evir ğŸ¡</button>
          <button class="btn secondary" onclick="carkSifirla()">SÄ±fÄ±rla</button>
        </div>
      </div>
    </div>
  </div>

</div>

<script>
  /* LOGIN */
  const DOGRU_KULLANICI = "Endam";
  const DOGRU_SIFRE = "21101998";

  function girisKontrol(){
    const u = (document.getElementById("kullanici").value || "").trim();
    const p = (document.getElementById("sifre").value || "").trim();
    const fb = document.getElementById("loginFeedback");

    if(u === DOGRU_KULLANICI && p === DOGRU_SIFRE){
      fb.textContent = "";
      document.getElementById("giris").style.display = "none";
      document.getElementById("basardin").style.display = "flex";
      document.getElementById("basardinYazi").textContent = "HoÅŸ geldin Endam â¤ï¸";
    } else {
      fb.textContent = "Kalbim kÄ±rÄ±ldÄ± ğŸ’”";
    }
  }

  function siteyeGir(){
    document.getElementById("basardin").style.display = "none";
    document.getElementById("site").style.display = "block";
    menuyeDon();
    dashboardBaslat();
    sozKartIlkYukle();
    kalpAnimasyonBaslat();
    carkEtiketleriOlustur();
    sarkiAutoNextKur();

    // âœ… Chat ikonu login sonrasÄ± gÃ¶rÃ¼nsÃ¼n
    aiEnable();
  }

  document.addEventListener("keydown", (e) => {
    const girisAcik = document.getElementById("giris").style.display !== "none";
    const basardinAcik = document.getElementById("basardin").style.display === "flex";
    if(girisAcik && e.key === "Enter") girisKontrol();
    if(basardinAcik && e.key === "Enter") siteyeGir();

    // Lightbox aÃ§Ä±kken klavye
    const lb = document.getElementById("lightbox");
    if(lb && lb.style.display === "flex"){
      if(e.key === "Escape") kapatLightbox();
      if(e.key === "ArrowLeft") oncekiFoto();
      if(e.key === "ArrowRight") sonrakiFoto();
    }

    // Chat aÃ§Ä±kken kÄ±sayollar
    if(e.key === "Escape" && aiOpen) aiClose();
    if(e.key === "Enter" && aiOpen){
      const a = document.activeElement;
      if(a && a.id === "aiInput") aiSend();
    }
  });

  /* SAYFA SÄ°STEMÄ° */
  const sayfalar = ["hikayeSayfa","fotoSayfa","sarkiSayfa","quizSayfa","sozSayfa","surprizSayfa","carkSayfa"];

  function sayfaAc(id){
    document.getElementById("menu").classList.add("hidden");
    sayfalar.forEach(s => document.getElementById(s).classList.add("hidden"));
    document.getElementById(id).classList.remove("hidden");
    window.scrollTo({ top: 0, behavior: "smooth" });

    if(id !== "sarkiSayfa") sarkiDurdur();
    if(id !== "quizSayfa") quizSifirlaSessiz();
    if(id === "fotoSayfa") albumKapat();
    if(id === "sozSayfa") sozKartIlkYukle();
    if(id === "surprizSayfa") surprizTemizle();
    if(id === "carkSayfa") carkSifirla(false);
  }

  function menuyeDon(){
    sayfalar.forEach(s => document.getElementById(s).classList.add("hidden"));
    document.getElementById("menu").classList.remove("hidden");
    sarkiDurdur();
    quizSifirlaSessiz();
    window.scrollTo({ top: 0, behavior: "smooth" });
  }

  /* FOTO + LIGHTBOX */
  const albumAdet = { ilkzamanlar:14, gunluk:18, dugunler:10, geziler:22, deniztatil:10, kamplarimiz:12 };
  let aktifAlbum = null;
  let aktifFotoIndex = 1;

  function albumAc(id){
    document.getElementById("albumListe").classList.add("hidden");
    document.getElementById("albumIci").classList.remove("hidden");
    const baslikMap = {
      ilkzamanlar: "â¤ï¸ Ä°lk Zamanlar",
      gunluk: "â¤ï¸ GÃ¼nlÃ¼k",
      dugunler: "â¤ï¸ DÃ¼ÄŸÃ¼nler",
      geziler: "â¤ï¸ Geziler",
      deniztatil: "â¤ï¸ Deniz Tatili",
      kamplarimiz: "â¤ï¸ KamplarÄ±mÄ±z"
    };
    document.getElementById("albumBaslik").textContent = baslikMap[id] || "";

    const hedef = document.getElementById("albumGaleri");
    hedef.innerHTML = "";
    const adet = albumAdet[id] || 0;

    for(let i=1; i<=adet; i++){
      const img = document.createElement("img");
      img.src = `img/${id}/${i}.jpg`;
      img.onclick = () => acLightbox(id, i);
      hedef.appendChild(img);
    }
    window.scrollTo({ top: 0, behavior: "smooth" });
  }

  function albumKapat(){
    document.getElementById("albumIci").classList.add("hidden");
    document.getElementById("albumListe").classList.remove("hidden");
    document.getElementById("albumGaleri").innerHTML = "";
    document.getElementById("albumBaslik").textContent = "";
    aktifAlbum = null;
    aktifFotoIndex = 1;
  }

  function acLightbox(albumId, index){
    aktifAlbum = albumId;
    aktifFotoIndex = index;
    document.getElementById("lightboxImg").src = `img/${aktifAlbum}/${aktifFotoIndex}.jpg`;
    document.getElementById("lightbox").style.display = "flex";
  }

  function kapatLightbox(){
    document.getElementById("lightbox").style.display = "none";
  }

  function lightboxArkaplanTik(e){
    const wrap = document.getElementById("lbWrap");
    if(!wrap.contains(e.target)) kapatLightbox();
  }

  function oncekiFoto(){
    if(!aktifAlbum) return;
    const max = albumAdet[aktifAlbum] || 0;
    if(max <= 0) return;
    aktifFotoIndex = (aktifFotoIndex <= 1) ? max : (aktifFotoIndex - 1);
    document.getElementById("lightboxImg").src = `img/${aktifAlbum}/${aktifFotoIndex}.jpg`;
  }

  function sonrakiFoto(){
    if(!aktifAlbum) return;
    const max = albumAdet[aktifAlbum] || 0;
    if(max <= 0) return;
    aktifFotoIndex = (aktifFotoIndex >= max) ? 1 : (aktifFotoIndex + 1);
    document.getElementById("lightboxImg").src = `img/${aktifAlbum}/${aktifFotoIndex}.jpg`;
  }

  // swipe
  let touchStartX = null;
  function lightboxTouchStart(e){
    if(e.touches && e.touches.length === 1) touchStartX = e.touches[0].clientX;
  }
  function lightboxTouchEnd(e){
    if(touchStartX === null) return;
    const endX = (e.changedTouches && e.changedTouches[0]) ? e.changedTouches[0].clientX : touchStartX;
    const diff = endX - touchStartX;
    if(Math.abs(diff) > 50){
      if(diff > 0) oncekiFoto();
      else sonrakiFoto();
    }
    touchStartX = null;
  }

  /* ÅARKI */
  let aktifSarkiNo = 1;
  const toplamSarki = 9;

  function cal(no, el){
    const p = document.getElementById("player");
    aktifSarkiNo = no;

    p.pause();
    p.currentTime = 0;
    p.src = `music/bizim-sarkimiz${no}.mp3`;
    p.load();
    p.play();

    document.querySelectorAll(".sarki").forEach(s => s.classList.remove("active"));
    el.classList.add("active");
  }

  function sarkiDurdur(){
    const p = document.getElementById("player");
    if(p){
      p.pause();
      p.currentTime = 0;
    }
    document.querySelectorAll(".sarki").forEach(s => s.classList.remove("active"));
  }

  function sarkiAutoNextKur(){
    const p = document.getElementById("player");
    if(!p) return;
    p.addEventListener("ended", () => {
      let sonraki = aktifSarkiNo + 1;
      if(sonraki > toplamSarki) sonraki = 1;
      const sarkiDivleri = document.querySelectorAll(".sarki");
      cal(sonraki, sarkiDivleri[sonraki - 1]);
    });
  }

  /* QUIZ */
  const sorular = [
    { soru: "Ä°lk ne zaman tanÄ±ÅŸtÄ±k?", secenekler: ["12 Mart 2021", "14 Åubat 2021", "1 Ocak 2021"], dogru: 0 },
    { soru: "Ä°lk buluÅŸmada nereye gitmiÅŸtik?", secenekler: ["ÃœskÃ¼dar", "KadÄ±kÃ¶y", "BeÅŸiktaÅŸ"], dogru: 0 },
    { soru: "Ä°lk birlikte yediÄŸimiz ÅŸey neydi?", secenekler: ["Simit", "Muz", "Hamburger"], dogru: 1 },
    { soru: "Uzak mesafede hangi ÅŸehirler vardÄ±?", secenekler: ["Manisa â€“ Yozgat", "Ankara â€“ Ä°stanbul", "Ä°zmir â€“ Bursa"], dogru: 0 },
    { soru: "NiÅŸanlanmayÄ± hangi ay dÃ¼ÅŸÃ¼nÃ¼yoruz?", secenekler: ["Ekim", "AralÄ±k", "Yaz"], dogru: 0 },
  ];

  let quizIndex = -1, quizPuan = 0, cevaplandi = false;

  function quizBaslat(){
    quizIndex = 0;
    quizPuan = 0;
    cevaplandi = false;

    document.getElementById("quizBaslatBtn").disabled = true;
    document.getElementById("quizNextBtn").disabled = true;
    document.getElementById("quizRestartBtn").style.display = "none";
    document.getElementById("quizSonuc").textContent = "";
    document.getElementById("quizNextBtn").textContent = "Sonraki";

    soruYukle();
  }

  function soruYukle(){
    cevaplandi = false;
    document.getElementById("quizFeedback").textContent = "";
    const elSecenekler = document.getElementById("quizSecenekler");
    elSecenekler.innerHTML = "";

    const s = sorular[quizIndex];
    document.getElementById("quizEtiket").textContent = `Soru ${quizIndex + 1} / ${sorular.length}`;
    document.getElementById("quizSoru").textContent = s.soru;

    s.secenekler.forEach((txt, i) => {
      const b = document.createElement("button");
      b.className = "quiz-btn";
      b.textContent = txt;
      b.onclick = () => sec(i);
      elSecenekler.appendChild(b);
    });
  }

  function sec(i){
    if(cevaplandi) return;
    cevaplandi = true;

    const s = sorular[quizIndex];
    Array.from(document.querySelectorAll("#quizSecenekler button")).forEach(b => b.disabled = true);

    if(i === s.dogru){
      quizPuan++;
      document.getElementById("quizFeedback").textContent = "DoÄŸru! â¤ï¸";
    }else{
      document.getElementById("quizFeedback").textContent = "YanlÄ±ÅŸ ğŸ˜„ Ama sorun deÄŸil â¤ï¸";
    }

    const nextBtn = document.getElementById("quizNextBtn");
    nextBtn.disabled = false;
    nextBtn.textContent = (quizIndex === sorular.length - 1) ? "Sonucu GÃ¶r" : "Sonraki";
  }

  function sonrakiSoru(){
    if(quizIndex < 0) return;

    if(quizIndex === sorular.length - 1){
      document.getElementById("quizSecenekler").innerHTML = "";
      document.getElementById("quizFeedback").textContent = "";
      document.getElementById("quizEtiket").textContent = "Test Bitti ğŸ‰";
      document.getElementById("quizSoru").textContent = `Skorun: ${quizPuan} / ${sorular.length}`;
      document.getElementById("quizSonuc").textContent = "Skordan baÄŸÄ±msÄ±zâ€¦ Bu hikÃ¢yeyi birlikte yazÄ±yoruz â¤ï¸";

      document.getElementById("quizNextBtn").disabled = true;
      document.getElementById("quizBaslatBtn").disabled = false;
      document.getElementById("quizBaslatBtn").textContent = "Testi Tekrar BaÅŸlat";
      document.getElementById("quizRestartBtn").style.display = "inline-block";
      return;
    }

    quizIndex++;
    document.getElementById("quizNextBtn").disabled = true;
    soruYukle();
  }

  function quizSifirla(){
    quizIndex = -1;
    quizPuan = 0;
    cevaplandi = false;

    document.getElementById("quizEtiket").textContent = "5 soruluk mini test ğŸ˜„";
    document.getElementById("quizSoru").textContent = "BaÅŸlamak iÃ§in â€œTesti BaÅŸlatâ€a bas.";
    document.getElementById("quizSecenekler").innerHTML = "";
    document.getElementById("quizFeedback").textContent = "";
    document.getElementById("quizSonuc").textContent = "";

    document.getElementById("quizBaslatBtn").disabled = false;
    document.getElementById("quizBaslatBtn").textContent = "Testi BaÅŸlat";
    document.getElementById("quizNextBtn").disabled = true;
    document.getElementById("quizNextBtn").textContent = "Sonraki";
    document.getElementById("quizRestartBtn").style.display = "none";
  }

  function quizSifirlaSessiz(){
    const el = document.getElementById("quizEtiket");
    if(el) quizSifirla();
  }

  /* Dashboard */
  const tanismaTarihi = new Date(2021, 2, 12);
  const sozlerMenu = [
    "BugÃ¼n de seni seÃ§iyorum â¤ï¸",
    "Kalbim hep sende ğŸŒ™",
    "Ä°yi ki varsÄ±nâ€¦ iyi ki biz ğŸ«¶",
    "Birlikte her ÅŸey daha gÃ¼zel âœ¨",
    "Sen benim en gÃ¼zel alÄ±ÅŸkanlÄ±ÄŸÄ±msÄ±n ğŸ’—",
    "GÃ¼lÃ¼ÅŸÃ¼n varsa, gÃ¼n tamam ğŸ˜Š"
  ];
  let dashTimerStarted = false;

  function dashboardBaslat(){
    if(dashTimerStarted) return;
    dashTimerStarted = true;

    document.getElementById("sozTxt").textContent =
      `â€œ${sozlerMenu[Math.floor(Math.random()*sozlerMenu.length)]}â€`;

    function tick(){
      const now = new Date();
      const hh = String(now.getHours()).padStart(2,"0");
      const mm = String(now.getMinutes()).padStart(2,"0");
      const ss = String(now.getSeconds()).padStart(2,"0");
      document.getElementById("saatTxt").textContent = `${hh}:${mm}:${ss}`;

      const gunler = ["Pazar","Pazartesi","SalÄ±","Ã‡arÅŸamba","PerÅŸembe","Cuma","Cumartesi"];
      const aylar = ["Ocak","Åubat","Mart","Nisan","MayÄ±s","Haziran","Temmuz","AÄŸustos","EylÃ¼l","Ekim","KasÄ±m","AralÄ±k"];
      document.getElementById("tarihTxt").textContent =
        `${now.getDate()} ${aylar[now.getMonth()]} ${now.getFullYear()} â€¢ ${gunler[now.getDay()]}`;

      const diffMs = now.getTime() - tanismaTarihi.getTime();
      const gun = Math.floor(diffMs / (1000*60*60*24));
      document.getElementById("sayacTxt").textContent = `${gun} gÃ¼n`;
    }

    tick();
    setInterval(tick, 1000);
  }

  /* SENÄ°N Ä°Ã‡Ä°N */
  const sozKartlari = [
    "Senin yanÄ±n, dÃ¼nyanÄ±n en gÃ¼venli yeri gibi.",
    "Seni sevmek, her gÃ¼n biraz daha iyi bir insan olmak gibi.",
    "Kalbimin en gÃ¼zel kÃ¶ÅŸesi hep sana ait.",
    "GÃ¼lÃ¼ÅŸÃ¼n varsa, gÃ¼nÃ¼n geri kalanÄ± kolay.",
    "Ne olursa olsun, ben hep â€œbizâ€ derim.",
    "Birlikteyken zaman daha yumuÅŸak akÄ±yor.",
    "Sen benim ÅŸansÄ±m deÄŸilâ€¦ kaderimin en gÃ¼zel kÄ±smÄ±sÄ±n.",
    "Ä°Ã§im daraldÄ±ÄŸÄ±nda, adÄ±nÄ± dÃ¼ÅŸÃ¼nmek yetiyor.",
    "Yan yana olmasak da, hep aynÄ± kalpte buluÅŸuyoruz.",
    "BugÃ¼n de yarÄ±n daâ€¦ seni seÃ§iyorum."
  ];
  let sozIndex = 0;
  let sozIlkYuklendi = false;

  function sozKartIlkYukle(){
    if(!sozIlkYuklendi){
      sozIlkYuklendi = true;
      sozIndex = Math.floor(Math.random() * sozKartlari.length);
    }
    document.getElementById("sozKartTxt").textContent = `â€œ${sozKartlari[sozIndex]}â€`;
  }
  function sozDegistir(){
    sozIndex = (sozIndex + 1) % sozKartlari.length;
    document.getElementById("sozKartTxt").textContent = `â€œ${sozKartlari[sozIndex]}â€`;
  }
  function sozBasaSar(){
    sozIndex = 0;
    document.getElementById("sozKartTxt").textContent = `â€œ${sozKartlari[sozIndex]}â€`;
  }

  /* UÃ§uÅŸan kalpler */
  let kalpBasladi = false;
  function kalpAnimasyonBaslat(){
    if(kalpBasladi) return;
    kalpBasladi = true;
    const container = document.getElementById("hearts");
    const hearts = ["â¤","ğŸ’—","ğŸ’–","ğŸ’˜","ğŸ’"];
    for(let i=0;i<14;i++){
      const span = document.createElement("div");
      span.className = "heart";
      span.textContent = hearts[Math.floor(Math.random()*hearts.length)];
      span.style.left = Math.random()*100 + "vw";
      span.style.animationDuration = (8 + Math.random()*8) + "s";
      span.style.animationDelay = (-Math.random()*10) + "s";
      span.style.fontSize = (12 + Math.random()*10) + "px";
      container.appendChild(span);
    }
  }

  /* ğŸ KÃ¼Ã§Ã¼k sÃ¼rpriz */
  let surprizTiklandi = false;

  function surprizKalpTik(){
    if(surprizTiklandi) return;
    surprizTiklandi = true;

    const msg = document.getElementById("hazirMsg");
    msg.classList.add("show");

    setTimeout(() => {
      surprizVideoAc();
    }, 1000);
  }

  function surprizVideoAc(){
    const wrap = document.getElementById("surprizVideoWrap");
    const v = document.getElementById("surprizVideo");
    wrap.style.display = "block";
    v.play().catch(()=>{});
    setTimeout(() => wrap.scrollIntoView({ behavior:"smooth", block:"start" }), 100);
  }

  function surprizTemizle(){
    surprizTiklandi = false;
    const msg = document.getElementById("hazirMsg");
    msg.classList.remove("show");

    const wrap = document.getElementById("surprizVideoWrap");
    const v = document.getElementById("surprizVideo");
    if(v){
      v.pause();
      v.currentTime = 0;
    }
    if(wrap) wrap.style.display = "none";
  }

  /* ğŸ  EVÄ°M SÃœRPRÄ°ZÄ° */
  let homeTimer = null;

  function homeSurprizBaslat(){
    const modal = document.getElementById("homeModal");
    const v = document.getElementById("homeVideo");
    const sub = document.getElementById("homeSub");

    modal.style.display = "flex";

    // sÃ¼rpriz modu
    v.style.display = "none";
    sub.style.display = "block";
    sub.classList.add("shake");

    if(homeTimer) clearTimeout(homeTimer);

    homeTimer = setTimeout(() => {
      sub.classList.remove("shake");
      sub.style.display = "none";
      v.style.display = "block";
      v.currentTime = 0;
      v.play().catch(()=>{});
    }, 800);
  }

  function homeVideoKapat(){
    const modal = document.getElementById("homeModal");
    const v = document.getElementById("homeVideo");
    const sub = document.getElementById("homeSub");

    if(homeTimer){ clearTimeout(homeTimer); homeTimer = null; }

    v.pause();
    v.currentTime = 0;
    v.style.display = "none";

    sub.classList.remove("shake");
    sub.style.display = "block";

    modal.style.display = "none";
  }

  function homeModalArkaTik(e){
    const card = document.querySelector("#homeModal .card");
    if(!card.contains(e.target)) homeVideoKapat();
  }

  /* ğŸ¡ Ã‡ARK */
  const wheelTasks = [
    "ğŸ’‹ 10 saniye Ã¶pÃ¼cÃ¼k",
    "ğŸ¤— SÄ±kÄ± bir sarÄ±lma",
    "ğŸ¶ Bir ÅŸarkÄ± seÃ§ ve aÃ§",
    "ğŸ—£ï¸ Bir anÄ±mÄ±zÄ± anlat",
    "âœ¨ 3 tane iltifat",
    "ğŸ“¸ Bir fotoÄŸraf seÃ§",
    "ğŸ’Œ KÃ¼Ã§Ã¼k bir not yaz",
    "ğŸŒ™ Bir dilek tut"
  ];

  let wheelRot = 0;
  let spinning = false;

  function carkEtiketleriOlustur(){
    const box = document.getElementById("wheelLabels");
    if(!box || box.childElementCount) return;

    const n = wheelTasks.length;
    const step = 360 / n;
    const radius = 130;

    for(let i=0;i<n;i++){
      const d = document.createElement("div");
      d.className = "wheel-label";
      const angle = (i * step) + (step / 2);
      d.style.transform =
        `translate(-50%, -50%) rotate(${angle}deg) translate(0, -${radius}px) rotate(${-angle}deg)`;
      d.textContent = wheelTasks[i];
      box.appendChild(d);
    }
  }

  function carkSifirla(resetText=true){
    spinning = false;
    wheelRot = 0;
    const w = document.getElementById("wheel");
    const btn = document.getElementById("spinBtn");
    const res = document.getElementById("wheelResult");
    if(w) w.style.transform = "rotate(0deg)";
    if(btn) btn.disabled = false;
    if(resetText && res) res.textContent = "HenÃ¼z Ã§evirmedin ğŸ’—";
  }

  function carkCevir(){
    if(spinning) return;
    spinning = true;

    const w = document.getElementById("wheel");
    const btn = document.getElementById("spinBtn");
    const res = document.getElementById("wheelResult");

    if(btn) btn.disabled = true;
    if(res) res.textContent = "DÃ¶nÃ¼yorâ€¦ ğŸ¡";

    const n = wheelTasks.length;
    const step = 360 / n;
    const idx = Math.floor(Math.random() * n);

    const targetCenter = idx * step + step/2;
    const extraTurns = 6 + Math.floor(Math.random()*3);
    const jitter = (Math.random()* (step*0.25)) - (step*0.125);

    const target = (extraTurns * 360) + (360 - targetCenter) + jitter;
    wheelRot = target;

    if(w) w.style.transform = `rotate(${wheelRot}deg)`;

    setTimeout(() => {
      spinning = false;
      if(btn) btn.disabled = false;
      if(res) res.textContent = `Ã‡Ä±kan gÃ¶rev: ${wheelTasks[idx]} ğŸ’—`;
    }, 4300);
  }

  /* DOM kurulum */
  document.addEventListener("DOMContentLoaded", () => {
    const lb = document.getElementById("lightbox");
    if(lb){
      lb.addEventListener("touchstart", lightboxTouchStart, {passive:true});
      lb.addEventListener("touchend", lightboxTouchEnd, {passive:true});
    }
  });

  /* =========================
     ğŸ’¬ Endam Bot Chat (UI + Call)
     ========================= */
  let aiOpen = false;
  let aiWelcomed = false;

  function aiEnable(){
    const fab = document.getElementById("aiFab");
    if(fab) fab.style.display = "flex";
    aiHelloOnce();
  }

  function aiToggle(){
    const box = document.getElementById("aiChat");
    aiOpen = !aiOpen;
    if(box) box.style.display = aiOpen ? "block" : "none";
    if(aiOpen){
      setTimeout(() => document.getElementById("aiInput")?.focus(), 50);
    }
  }

  function aiClose(){
    const box = document.getElementById("aiChat");
    aiOpen = false;
    if(box) box.style.display = "none";
  }

  function aiAddMsg(text, who){
    const body = document.getElementById("aiChatBody");
    if(!body) return;
    const d = document.createElement("div");
    d.className = `aiMsg ${who === "user" ? "aiUser" : "aiBot"}`;
    d.textContent = text;
    body.appendChild(d);
    body.scrollTop = body.scrollHeight;
  }

  function aiHelloOnce(){
    if(aiWelcomed) return;
    aiWelcomed = true;
    aiAddMsg("Merhaba ğŸ’— Ben Endam Bot. Yaz banaâ€¦", "bot");
  }

  async function aiSend(){
    const inp = document.getElementById("aiInput");
    const btn = document.getElementById("aiSend");
    const msg = (inp?.value || "").trim();
    if(!msg) return;

    aiAddMsg(msg, "user");
    if(inp) inp.value = "";

    if(btn) btn.disabled = true;
    aiAddMsg("YazÄ±yorumâ€¦", "bot");

    try{
      const r = await fetch("/.netlify/functions/endam-bot", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: msg })
      });

      const data = await r.json().catch(() => ({}));

      // son â€œYazÄ±yorumâ€¦â€ mesajÄ±nÄ± kaldÄ±r
      const body = document.getElementById("aiChatBody");
      if(body && body.lastChild) body.removeChild(body.lastChild);

      const reply = (data && data.reply) ? String(data.reply) : "Bir ÅŸeyler ters gitti ğŸ’”";
      aiAddMsg(reply, "bot");
    }catch(e){
      const body = document.getElementById("aiChatBody");
      if(body && body.lastChild) body.removeChild(body.lastChild);
      aiAddMsg("BaÄŸlantÄ± hatasÄ± ğŸ’”", "bot");
    }finally{
      if(btn) btn.disabled = false;
    }
  }
</script>

<!-- ğŸ’¬ Endam Bot (SaÄŸ Alt) -->
<div id="aiFab" onclick="aiToggle()" aria-label="Endam Bot">
  <span>ğŸ’¬</span>
</div>

<div id="aiChat" aria-label="Endam Bot Chat">
  <div id="aiChatHeader">
    <div class="title">ğŸ’— Endam Bot</div>
    <button class="close" onclick="aiClose()" aria-label="Kapat">âœ•</button>
  </div>
  <div id="aiChatBody"></div>
  <div id="aiChatInput">
    <input id="aiInput" type="text" placeholder="Bir ÅŸey yaz..." autocomplete="off" />
    <button id="aiSend" onclick="aiSend()">GÃ¶nder</button>
  </div>
</div>

</body>
</html>
